<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>AE Series - Web API</title>

    <meta name="author" content="Christoph Martens">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="./design/reveal.css">
    <link rel="stylesheet" href="./design/code-zenburn.css">
    <link rel="stylesheet" href="./design/theme-sky.css">

</head>
<body>

<div class="reveal">
<div class="slides">

	<section>
		<img src="./asset/00-logo.png" width="192" height="192">
		<h2>Web API</h2>
		<p>
			<a href="http://github.com/INT-WAW">github.com/INT-WAW</a>
		</p>
	</section>

	<section>
		<section>
			<h1>Web API</h1>
		</section>
		<section>
			<h2>Web API</h2>
			<ul>
				<li>Web API hat NICHTS mit DOM zu tun</li>
				<li>Web API ist Browser-API fuer Web Apps</li>
				<li>Mehr auf <a href="https://developer.mozilla.org/en-US/docs/Web/API">https://developer.mozilla.org/en-US/docs/Web/API</a></li>
			</ul>
		</section>
		<section>
			<h2>XHR</h2>
			<ul>
				<li>XHR steht fuer XMLHttpRequest</li>
				<li>Alte schrottige Web-API</li>
				<li>Neue API ist <code>HTTP fetch</code></li>
				<li>Fetch ist noch nicht Standard (thx to MS)</li>
				<li>XHR2 nicht ganz so scheisse</li>
			</ul>
		</section>
		<section>
			<h2>Beispiel</h2>
<pre class="javascript"><code>var xhr = new XMLHttpRequest();

xhr.open('GET', 'http://server.tld/api/Status');

xhr.responseType = 'json';

xhr.onload = function() {

	var data = xhr.response;
	if (data !== null) {
		console.log(data); // Parsed JSON object
	}

};

xhr.send(null);</code></pre>
		</section>
	</section>
	<section>
		<section>
			<h1>Live Coding</h1>
		</section>
		<section>
			<h2>Aufgabe</h2>
			<ul>
				<li>GET Request zu <code>botnet.artificial.engineering</code></li>
				<li>Port ist <code>8080</code></li>
				<li>Pfad ist <code>/api/Status</code></li>
				<li>Parse JSON Daten und logge Antwort in console</li>
				<li>Setze Encoding auf <code>UTF-8</code></li>
			</ul>
		</section>
	</section>
	<section>
		<section>
			<h1>DOM API</h1>
		</section>
		<section>
			<h2>DOM API</h2>
			<ul>
				<li>DOM API ist Document Object Model</li>
				<li>Manipulation des DOM Inhalts</li>
				<li>HTML ist NICHT DOM</li>
				<li>DOM ist aktuelle Repraesentation von HTML</li>
			</ul>
		</section>
		<section>
			<h2>querySelector / querySelectorAll</h2>
			<ul>
				<li>Initieller Query fuer Elementmanipulation</li>
				<li><code>querySelector</code>  fuer einzelnes Element</li>
				<li><code>querySelectorAll</code>  fuer mehrere Elemente</li>
			</ul>
<pre class="javascript"><code>var element = document.querySelector('#status tbody');

console.log(element); // tbody Element API</code></pre>
		</section>
		<section>
			<h2>Element API</h2>
			<ul>
				<li>DOM Elemente vererben von Web IDL Interfaces</li>
				<li>Jedes Element vererbt von HTMLElement</li>
				<li>Beispiel: HTMLDivElement</li>
				<li>Behinderte Schreibweise</li>
				<li>Namespaces aus XHTML moeglich, aber unbrauchbar</li>
				<li><code>data-\*</code>  Attribute fuer Datenverhalten</li>
			</ul>
		</section>
		<section>
			<h2>Element API</h2>
			<ul>
				<li><code>innerHTML</code> Property (Crappy, aber einfach)</li>
				<li><code>getAttribute(name)</code>  API</li>
				<li><code>document.createElement(tag)</code>  API</li>
				<li><code>document.createDocumentFragment()</code>  API</li>
			</ul>
		</section>
	</section>
	<section>
		<section>
			<h1>Formulare</h1>
		</section>
		<section>
			<h2>Form Element</h2>
			<ul>
				<li><code>form</code>  Tag</li>
				<li>Legacy Shit, nutzt sowieso keiner mehr</li>
				<li>Damals mit MIME attachment encoding</li>
				<li>Ja genauso crappy wie E-Mails</li>
				<li>Nutzen wir nicht, da behindert</li>
			</ul>
		</section>
		<section>
			<h2>Input Element</h2>
			<ul>
				<li><code>input</code>  Tag</li>
				<li><code>type</code>  Attribut ( <code>text</code> , <code>range</code> , <code>number</code> , <code>date</code>  )</li>
				<li><code>value</code>  Attribut</li>
			</ul>
		</section>
	</section>
	<section>
		<section>
			<h1>Live Coding</h1>
		</section>
		<section>
			<h2>Aufgabe</h2>
			<ul>
				<li>Button mit <code>start</code>  und <code>stop</code></li>
				<li>POST Request zu <code>botnet.artificial.engineering</code></li>
				<li>Port ist <code>8080</code></li>
				<li>Pfad ist <code>/api/Status</code></li>
				<li>Sende JSON Inhalt via <code>xhr.send(data)</code></li>
				<li>Inhalt ist: id, action ( <code>stop</code>  or <code>start</code>  )</li>
				<li>Hint: Google JSON xhr send MDN</li>
			</ul>
		</section>
	</section>
	<section>
		<section>
			<h1>HTTP Fetch</h1>
		</section>
		<section>
			<h2>Fetch API</h2>
			<ul>
				<li>Gemacht fuer HTTP 2.0</li>
				<li>Gemacht fuer Promises</li>
				<li>Awesome API, but not so awesome Vendors</li>
				<li>Laeuft in Firefox und Chrome</li>
				<li>Nicht in Safari oder Edge (because Retards)</li>
			</ul>
		</section>
		<section>
			<h2>Fetch API</h2>
			<ul>
				<li>Fetch API nutzt Promises</li>
				<li>deshalb async/await faehige API</li>
			</ul>
		</section>
		<section>
			<h2>Beispiel</h2>
<pre class="javascript"><code>var img = document.querySelector('#status img');

fetch('fancy.jpg').then(function(response) {
	return response.blob();
}).then(function(response) {

	var url = URL.createObjectURL(response);
	img.src = url;

});</code></pre>
		</section>
		<section>
			<h2>Beispiel (ES7)</h2>
<pre class="javascript"><code>var img  = document.querySelector('#status img');
(async() =&gt; {

	var blob = await fetch('fancy.jpg').then(response =&gt; response.blob);
	var url  = await URL.createObjectURL(response);
	img.src = url;

})();</code></pre>
		</section>
	</section>
	<section>
		<section>
			<h1>Promises</h1>
		</section>
		<section>
			<h2>Promises</h2>
			<ul>
				<li>Callbacks sind behindert</li>
				<li>Promises are awesome</li>
				<li>Legacy Browsers are NOT</li>
				<li>Abstraktionsidee von asynchronem Code</li>
			</ul>
		</section>
		<section>
			<h2>Beispiel</h2>
<pre class="javascript"><code>var foo = new Promise(function(resolve, reject) {

	setTimeout(function() {
		resolve();
	}, 3000);

});

foo.then(function(val) {
	console.log(val);
});

foo.then(function(val) {
	div.innerHTML = 'WOOOT ' + val;
});</code></pre>
		</section>
	</section>
	<section>
		<section>
			<h1>Live Coding</h1>
		</section>
		<section>
			<h2>Aufgabe</h2>
			<ul>
				<li>Migriere den bestehenden Code zu Fetch API</li>
				<li>Nutze ein richtiges Promise</li>
				<li>Teste in anderen Browsern</li>
				<li>Finde heraus, welcher Browser scheisse ist</li>
				<li>Google Promise Polyfill IE</li>
				<li>Microsoft Fanboys: Google Fetch Polyfill IE</li>
			</ul>
		</section>
	</section>


</div>
</div>

<script src="./source/head.min.js"></script>
<script src="./source/reveal.js"></script>
<script src="./source/preview.js"></script>

</body>
</html>
